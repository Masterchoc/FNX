var FNX=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=15)}([function(t,e,r){"use strict";function n(t){e.ARRAY_TYPE=s=t}function i(t){return t*u}function o(t,e){return Math.abs(t-e)<=a*Math.max(1,Math.abs(t),Math.abs(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=n,e.toRadian=i,e.equals=o;var a=e.EPSILON=1e-6,s=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,u=(e.RANDOM=Math.random,Math.PI/180)},function(t,e){t.exports=function(){function t(t){t.materials.push(this)}return t}()},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";(function(t){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return a(this,t,e,r)}function a(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?c(t,e,r,n):"string"==typeof e?f(t,e,r):p(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,r,n){return s(e),e<=0?i(t,e):void 0!==r?"string"==typeof n?i(t,e).fill(r,n):i(t,e).fill(r):i(t,e)}function h(t,e){if(s(e),t=i(t,e<0?0:0|d(e)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(e,r);t=i(t,n);var a=t.write(e,r);return a!==n&&(t=t.slice(0,a)),t}function l(t,e){var r=e.length<0?0:0|d(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function c(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=l(t,e),t}function p(t,e){if(o.isBuffer(e)){var r=0|d(e.length);return t=i(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||K(e.length)?i(t,0):l(t,e);if("Buffer"===e.type&&Q(e.data))return l(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function m(t){return+t!=t&&(t=0),o.alloc(+t)}function v(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(n)return V(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return L(this,e,r);case"latin1":case"binary":return I(this,e,r);case"base64":return T(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function M(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}var h;if(i){var f=-1;for(h=r;h<s;h++)if(o(t,h)===o(e,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===u)return f*a}else-1!==f&&(h-=h-f),f=-1}else for(r+u>s&&(r=s-u),h=r;h>=0;h--){for(var l=!0,c=0;c<u;c++)if(o(t,h+c)!==o(e,c)){l=!1;break}if(l)return h}return-1}function w(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function E(t,e,r,n){return W(V(e,t.length-r),t,r,n)}function _(t,e,r,n){return W(z(e),t,r,n)}function A(t,e,r,n){return _(t,e,r,n)}function x(t,e,r,n){return W(G(e),t,r,n)}function P(t,e,r,n){return W(H(e,t.length-r),t,r,n)}function T(t,e,r){return 0===e&&r===t.length?Z.fromByteArray(t):Z.fromByteArray(t.slice(e,r))}function S(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var u,h,f,l;switch(s){case 1:o<128&&(a=o);break;case 2:u=t[i+1],128==(192&u)&&(l=(31&o)<<6|63&u)>127&&(a=l);break;case 3:u=t[i+1],h=t[i+2],128==(192&u)&&128==(192&h)&&(l=(15&o)<<12|(63&u)<<6|63&h)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:u=t[i+1],h=t[i+2],f=t[i+3],128==(192&u)&&128==(192&h)&&128==(192&f)&&(l=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&f)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return R(n)}function R(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=$));return r}function L(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function N(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=X(t[o]);return i}function O(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function C(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function F(t,e,r,n,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function k(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function B(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function U(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(t,e,r,n,i){return i||U(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(t,e,r,n,23,4),r+4}function Y(t,e,r,n,i){return i||U(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(t,e,r,n,52,8),r+8}function q(t){if(t=j(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function j(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function X(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function H(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function G(t){return Z.toByteArray(q(t))}function W(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function K(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var Z=r(16),J=r(17),Q=r(18);e.Buffer=o,e.SlowBuffer=m,e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=n(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,r){return a(null,t,e,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,r){return u(null,t,e,r)},o.allocUnsafe=function(t){return h(null,t)},o.allocUnsafeSlow=function(t){return h(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):y.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,n,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var a=i-n,s=r-e,u=Math.min(a,s),h=this.slice(n,i),f=t.slice(e,r),l=0;l<u;++l)if(h[l]!==f[l]){a=h[l],s=f[l];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return M(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return M(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return E(this,t,e,r);case"ascii":return _(this,t,e,r);case"latin1":case"binary":return A(this,t,e,r);case"base64":return x(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=o.prototype;else{var i=e-t;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},o.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||C(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||C(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||C(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||C(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),J.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),J.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),J.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),J.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){F(this,t,e,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){F(this,t,e,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):B(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);F(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);F(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,r){return D(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return D(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return Y(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return Y(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,a=n-r;if(this===t&&r<e&&e<n)for(i=a-1;i>=0;--i)t[i+e]=this[i+r];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+a),e);return a},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var s=o.isBuffer(t)?t:V(new o(t,n).toString()),u=s.length;for(a=0;a<r-e;++a)this[a+e]=s[a%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,r(2))},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=r(5),i=function(t){function e(t){e.__super__.constructor.call(this),this.canvas=window.document.getElementById(t),this.canvas&&(window.gl=this.canvas.getContext("webgl2"),this.computeArea(),window.addEventListener("resize",function(t){return function(e){return t.computeArea()}}(this)))}return o(e,t),e.prototype.computeArea=function(){return this.size=this.canvas.parentNode.getBoundingClientRect(),this.canvas.width=this.size.width,this.canvas.height=this.size.height,window.gl.viewport(0,0,this.size.width,this.size.height)},e.prototype.getWidth=function(){return this.size.width},e.prototype.getHeight=function(){return this.size.height},e}(n),t.exports=i},function(t,e){var r;r=function(){function t(){this.running=!1,this.lastFrameTime=Date.now(),this.deltaTime=0,this.fps=0,this.loopId=0}return t.prototype.loop=function(t){var e;return e=function(e){return function(){return e.loop(t)}}(this),this.lastFrameTime?(this.deltaTime=(Date.now()-this.lastFrameTime)/1e3,this.lastFrameTime=Date.now(),this.fps=Math.floor(1/this.deltaTime),"function"==typeof this.update&&this.update(),"function"==typeof t&&t(),this.running?this.loopId=window.requestAnimationFrame(e):void 0):(this.lastFrameTime=Date.now(),void(this.loopId=window.requestAnimationFrame(e)))},t.prototype.run=function(t){return this.running=!0,this.loop(t)},t}(),t.exports=r},function(t,e){var r;r=function(){function t(){FNX.Texture.MAX_SIZE=gl.getParameter(gl.MAX_TEXTURE_SIZE)}return t.prototype.init=function(){return gl.enable(gl.DEPTH_TEST),gl.cullFace(gl.BACK),gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),gl.enable(gl.CULL_FACE),gl.cullFace(gl.BACK)},t.prototype.clear=function(){return gl.clear(gl.DEPTH_BUFFER_BIT|gl.COLOR_BUFFER_BIT)},t.prototype.render=function(t){var e,r,n,i,o,a,s;if(t.activeCamera){for(t.activeCamera.update(),a=t.materials,e=0,r=a.length;e<r;e++)n=a[e],n.update();s=[];for(o in t.meshes)i=t.meshes[o],i.material&&i.material.shader.compiled?(i.material.shader.setUniformMat4("mTransform",i.transform.getTransformation()),i.material.shader.setUniformMat4("mView",t.activeCamera.viewMatrix),i.material.shader.setUniformMat4("mProj",t.activeCamera.projMatrix),s.push(i.draw())):s.push(void 0);return s}},t}(),t.exports=r},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var i=r(0),o=n(i),a=r(24),s=n(a),u=r(25),h=n(u),f=r(8),l=n(f),c=r(26),p=n(c),d=r(27),m=n(d),v=r(28),y=n(v),g=r(9),M=n(g),b=r(10),w=n(b);e.glMatrix=o,e.mat2=s,e.mat2d=h,e.mat3=l,e.mat4=p,e.quat=m,e.vec2=y,e.vec3=M,e.vec4=w},function(t,e,r){"use strict";function n(){var t=new C.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function o(t){var e=new C.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function s(t,e,r,n,i,o,a,s,u){var h=new C.ARRAY_TYPE(9);return h[0]=t,h[1]=e,h[2]=r,h[3]=n,h[4]=i,h[5]=o,h[6]=a,h[7]=s,h[8]=u,h}function u(t,e,r,n,i,o,a,s,u,h){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=h,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function l(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],f=e[8],l=f*a-s*h,c=-f*o+s*u,p=h*o-a*u,d=r*l+n*c+i*p;return d?(d=1/d,t[0]=l*d,t[1]=(-f*n+i*h)*d,t[2]=(s*n-i*a)*d,t[3]=c*d,t[4]=(f*r-i*u)*d,t[5]=(-s*r+i*o)*d,t[6]=p*d,t[7]=(-h*r+n*u)*d,t[8]=(a*r-n*o)*d,t):null}function c(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],f=e[8];return t[0]=a*f-s*h,t[1]=i*h-n*f,t[2]=n*s-i*a,t[3]=s*u-o*f,t[4]=r*f-i*u,t[5]=i*o-r*s,t[6]=o*h-a*u,t[7]=n*u-r*h,t[8]=r*a-n*o,t}function p(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],h=t[8];return e*(h*o-a*u)+r*(-h*i+a*s)+n*(u*i-o*s)}function d(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],f=e[7],l=e[8],c=r[0],p=r[1],d=r[2],m=r[3],v=r[4],y=r[5],g=r[6],M=r[7],b=r[8];return t[0]=c*n+p*a+d*h,t[1]=c*i+p*s+d*f,t[2]=c*o+p*u+d*l,t[3]=m*n+v*a+y*h,t[4]=m*i+v*s+y*f,t[5]=m*o+v*u+y*l,t[6]=g*n+M*a+b*h,t[7]=g*i+M*s+b*f,t[8]=g*o+M*u+b*l,t}function m(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],f=e[7],l=e[8],c=r[0],p=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c*n+p*a+h,t[7]=c*i+p*s+f,t[8]=c*o+p*u+l,t}function v(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],f=e[7],l=e[8],c=Math.sin(r),p=Math.cos(r);return t[0]=p*n+c*a,t[1]=p*i+c*s,t[2]=p*o+c*u,t[3]=p*a-c*n,t[4]=p*s-c*i,t[5]=p*u-c*o,t[6]=h,t[7]=f,t[8]=l,t}function y(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function g(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function M(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function b(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function w(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function E(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,h=r*a,f=n*a,l=n*s,c=i*a,p=i*s,d=i*u,m=o*a,v=o*s,y=o*u;return t[0]=1-l-d,t[3]=f-y,t[6]=c+v,t[1]=f+y,t[4]=1-h-d,t[7]=p-m,t[2]=c-v,t[5]=p+m,t[8]=1-h-l,t}function _(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],f=e[8],l=e[9],c=e[10],p=e[11],d=e[12],m=e[13],v=e[14],y=e[15],g=r*s-n*a,M=r*u-i*a,b=r*h-o*a,w=n*u-i*s,E=n*h-o*s,_=i*h-o*u,A=f*m-l*d,x=f*v-c*d,P=f*y-p*d,T=l*v-c*m,S=l*y-p*m,R=c*y-p*v,L=g*R-M*S+b*T+w*P-E*x+_*A;return L?(L=1/L,t[0]=(s*R-u*S+h*T)*L,t[1]=(u*P-a*R-h*x)*L,t[2]=(a*S-s*P+h*A)*L,t[3]=(i*S-n*R-o*T)*L,t[4]=(r*R-i*P+o*x)*L,t[5]=(n*P-r*S-o*A)*L,t[6]=(m*_-v*E+y*w)*L,t[7]=(v*b-d*_-y*M)*L,t[8]=(d*E-m*b+y*g)*L,t):null}function A(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function x(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function P(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function T(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function S(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function R(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function L(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function I(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function N(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],h=t[7],f=t[8],l=e[0],c=e[1],p=e[2],d=e[3],m=e[4],v=e[5],y=e[6],g=e[7],M=e[8];return Math.abs(r-l)<=C.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=C.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-p)<=C.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-d)<=C.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-m)<=C.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-v)<=C.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-y)<=C.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(h-g)<=C.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(f-M)<=C.EPSILON*Math.max(1,Math.abs(f),Math.abs(M))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=n,e.fromMat4=i,e.clone=o,e.copy=a,e.fromValues=s,e.set=u,e.identity=h,e.transpose=f,e.invert=l,e.adjoint=c,e.determinant=p,e.multiply=d,e.translate=m,e.rotate=v,e.scale=y,e.fromTranslation=g,e.fromRotation=M,e.fromScaling=b,e.fromMat2d=w,e.fromQuat=E,e.normalFromMat4=_,e.projection=A,e.str=x,e.frob=P,e.add=T,e.subtract=S,e.multiplyScalar=R,e.multiplyScalarAndAdd=L,e.exactEquals=I,e.equals=N;var O=r(0),C=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(O);e.mul=d,e.sub=S},function(t,e,r){"use strict";function n(){var t=new X.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function i(t){var e=new X.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function o(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function a(t,e,r){var n=new X.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function u(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function h(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function f(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function l(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function c(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function m(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function v(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function y(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function g(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function M(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function b(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}function w(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function E(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function _(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function A(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function x(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function P(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function T(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2];return t[0]=i*u-o*s,t[1]=o*a-n*u,t[2]=n*s-i*a,t}function S(t,e,r,n){var i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t}function R(t,e,r,n,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,h=a*(o-1),f=a*(3-2*o);return t[0]=e[0]*s+r[0]*u+n[0]*h+i[0]*f,t[1]=e[1]*s+r[1]*u+n[1]*h+i[1]*f,t[2]=e[2]*s+r[2]*u+n[2]*h+i[2]*f,t}function L(t,e,r,n,i,o){var a=1-o,s=a*a,u=o*o,h=s*a,f=3*o*s,l=3*u*a,c=u*o;return t[0]=e[0]*h+r[0]*f+n[0]*l+i[0]*c,t[1]=e[1]*h+r[1]*f+n[1]*l+i[1]*c,t[2]=e[2]*h+r[2]*f+n[2]*l+i[2]*c,t}function I(t,e){e=e||1;var r=2*X.RANDOM()*Math.PI,n=2*X.RANDOM()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}function N(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,t}function O(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t}function C(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2],h=r[3],f=h*n+s*o-u*i,l=h*i+u*n-a*o,c=h*o+a*i-s*n,p=-a*n-s*i-u*o;return t[0]=f*h+p*-a+l*-u-c*-s,t[1]=l*h+p*-s+c*-a-f*-u,t[2]=c*h+p*-u+f*-s-l*-a,t}function F(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function k(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function B(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function U(t,e){var r=a(t[0],t[1],t[2]),n=a(e[0],e[1],e[2]);x(r,r),x(n,n);var i=P(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)}function D(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Y(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function q(t,e){var r=t[0],n=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(r-o)<=X.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=X.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=X.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=n,e.clone=i,e.length=o,e.fromValues=a,e.copy=s,e.set=u,e.add=h,e.subtract=f,e.multiply=l,e.divide=c,e.ceil=p,e.floor=d,e.min=m,e.max=v,e.round=y,e.scale=g,e.scaleAndAdd=M,e.distance=b,e.squaredDistance=w,e.squaredLength=E,e.negate=_,e.inverse=A,e.normalize=x,e.dot=P,e.cross=T,e.lerp=S,e.hermite=R,e.bezier=L,e.random=I,e.transformMat4=N,e.transformMat3=O,e.transformQuat=C,e.rotateX=F,e.rotateY=k,e.rotateZ=B,e.angle=U,e.str=D,e.exactEquals=Y,e.equals=q;var j=r(0),X=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(j);e.sub=f,e.mul=l,e.div=c,e.dist=b,e.sqrDist=w,e.len=o,e.sqrLen=E,e.forEach=function(){var t=n();return function(e,r,n,i,o,a){var s=void 0,u=void 0;for(r||(r=3),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()},function(t,e,r){"use strict";function n(){var t=new F.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function i(t){var e=new F.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(t,e,r,n){var i=new F.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function u(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function h(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function f(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function l(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function c(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function d(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function m(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function v(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function y(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function g(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function M(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)}function b(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o}function w(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function E(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function _(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function A(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function x(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a),t}function P(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function T(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=s+n*(r[3]-s),t}function S(t,e){return e=e||1,t[0]=F.RANDOM(),t[1]=F.RANDOM(),t[2]=F.RANDOM(),t[3]=F.RANDOM(),x(t,t),y(t,t,e),t}function R(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t}function L(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2],h=r[3],f=h*n+s*o-u*i,l=h*i+u*n-a*o,c=h*o+a*i-s*n,p=-a*n-s*i-u*o;return t[0]=f*h+p*-a+l*-u-c*-s,t[1]=l*h+p*-s+c*-a-f*-u,t[2]=c*h+p*-u+f*-s-l*-a,t[3]=e[3],t}function I(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function O(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],h=e[3];return Math.abs(r-a)<=F.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=F.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=F.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-h)<=F.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=n,e.clone=i,e.fromValues=o,e.copy=a,e.set=s,e.add=u,e.subtract=h,e.multiply=f,e.divide=l,e.ceil=c,e.floor=p,e.min=d,e.max=m,e.round=v,e.scale=y,e.scaleAndAdd=g,e.distance=M,e.squaredDistance=b,e.length=w,e.squaredLength=E,e.negate=_,e.inverse=A,e.normalize=x,e.dot=P,e.lerp=T,e.random=S,e.transformMat4=R,e.transformQuat=L,e.str=I,e.exactEquals=N,e.equals=O;var C=r(0),F=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(C);e.sub=h,e.mul=f,e.div=l,e.dist=M,e.sqrDist=b,e.len=w,e.sqrLen=E,e.forEach=function(){var t=n();return function(e,r,n,i,o,a){var s=void 0,u=void 0;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}()},function(t,e){t.exports={createBuffer:function(t,e,r){var n,i;return i=gl.createBuffer(),n=t===gl.ARRAY_BUFFER?Float32Array:Uint16Array,gl.bindBuffer(t,i),gl.bufferData(t,new n(e),gl.STATIC_DRAW),i.itemSize=r,i.numItems=e.length/r,i},createVertexBuffer:function(t,e){return null==e&&(e=[]),new Float32Array(t)},createIndicesBuffer:function(t){return new Uint16Array(t)},createMatrixBuffer:function(t){return new Float32Array(t)}}},function(t,e){t.exports={get:function(t,e){return t.method="get",this.request(t,e)},post:function(t,e){return t.method="post",this.request(t,e)},request:function(t,e){var r,n,i,o,a,s,u,h;if(o=(null!=(a=t.method)?a.toLowerCase():void 0)||"get",u=t.url,i=null!=(s=t.dataType)?s.toLowerCase():void 0,n=t.data,n instanceof FormData||(r="json"===i?"application/json;charset=UTF-8":"application/x-www-form-urlencoded;charset=UTF-8"),null!=n){if(null!=r&&"object"==typeof n)switch(i){case"json":n=JSON.stringify(n);break;default:n=querystring.stringify(n)}"get"===o&&(u=u+"?"+n,n=null)}return h=new(window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP"),null!=t.onProgress&&(h.upload.onprogress=function(e){if(e.lengthComputable)return t.onProgress(e.loaded/e.total)}),null!=t.onComplete&&(h.upload.onload=function(e){return t.onComplete()}),null!=e&&(h.onreadystatechange=function(t){var r;if(4===h.readyState){if(0===(r=h.status)||200===r){n=h.responseText;try{n=JSON.parse(n)}catch(t){t;try{n=querystring.parse(n)}catch(t){t}}return e(null,n)}return e({code:h.status,message:h.status+" ("+h.statusText+")"+(h.responseText?": "+h.responseText:"")})}}),h.open(o,u,!0),"function"==typeof h.overrideMimeType&&h.overrideMimeType("text/plain"),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),r&&h.setRequestHeader("content-type",r),h.send(n)}}},function(t,e){var r;r=function(){function t(t){this.scene=t,this.fov=35,this.ratio=this.scene.engine.canvas.clientWidth/this.scene.engine.canvas.clientHeight,this.near=.1,this.far=100,this.keys={up:!1,down:!1,left:!1,right:!1},this.identity=FNX.glm.mat4.create(),this.worldMatrix=FNX.glm.mat4.create(),this.viewMatrix=FNX.glm.mat4.create(),this.projMatrix=FNX.glm.mat4.create(),FNX.glm.mat4.perspective(this.projMatrix,FNX.glm.glMatrix.toRadian(this.fov),this.ratio,this.near,this.far),this.scene.engine.input.on("keydown",function(t){return function(e){if(90===e&&(t.keys.up=!0),83===e&&(t.keys.down=!0),81===e&&(t.keys.left=!0),68===e)return t.keys.right=!0}}(this)),this.scene.engine.input.on("keyup",function(t){return function(e){if(90===e&&(t.keys.up=!1),83===e&&(t.keys.down=!1),81===e&&(t.keys.left=!1),68===e)return t.keys.right=!1}}(this)),this.scene.engine.scenes[this.scene.engine.activeScene].activeCamera=this}return t}(),t.exports=r},function(t,e){t.exports=function(){function t(t,e){this.name=t,this.scene=e,this.diffuseTexture=null,this.diffuseColor=null,this.shader=new FNX.Shader,this.shader.addVertexShader(e.shaders.basic.vertex),this.shader.addFragmentShader(e.shaders.basic.fragment),this.shader.compile(),this.shader.bind(),this.shader.addUniform("mView"),this.shader.addUniform("mViewInverse"),this.shader.addUniform("mProj"),this.shader.addUniform("mTransform"),this.scene.activeCamera&&(this.shader.setUniformMat4("mView",this.scene.activeCamera.viewMatrix),this.shader.setUniformMat4("mViewInverse",FNX.glm.mat4.invert(this.scene.activeCamera.viewMatrix,this.scene.activeCamera.viewMatrix)),this.shader.setUniformMat4("mProj",this.scene.activeCamera.projMatrix)),this.scene.materials.push(this)}return t.prototype.setDiffuseTexture=function(t){return this.diffuseTexture=t},t.prototype.update=function(){this.scene.activeCamera},t}()},function(t,e,r){(function(e){e.Buffer=e.Buffer||r(3).Buffer,t.exports={Engine:r(19),GameLoop:r(5),Mesh:r(22),Vertex:r(23),Util:r(11),Assets:r(29),Transform:r(32),Scene:r(33),Camera:r(13),FlyingCamera:r(34),GameObject:r(35),Window:r(4),Shader:r(36),Texture:r(37),Renderer:r(6),Material:r(14),BasicMaterial:r(38),Light:r(1),PointLight:r(39),DirectionalLight:r(40),Http:r(12),glm:r(7),OBJ:r(41)}}).call(e,r(2))},function(t,e,r){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return 3*t.length/4-n(t)}function o(t){var e,r,i,o,a,s=t.length;o=n(t),a=new l(3*s/4-o),r=o>0?s-4:s;var u=0;for(e=0;e<r;e+=4)i=f[t.charCodeAt(e)]<<18|f[t.charCodeAt(e+1)]<<12|f[t.charCodeAt(e+2)]<<6|f[t.charCodeAt(e+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===o?(i=f[t.charCodeAt(e)]<<2|f[t.charCodeAt(e+1)]>>4,a[u++]=255&i):1===o&&(i=f[t.charCodeAt(e)]<<10|f[t.charCodeAt(e+1)]<<4|f[t.charCodeAt(e+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}function a(t){return h[t>>18&63]+h[t>>12&63]+h[t>>6&63]+h[63&t]}function s(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(a(n));return i.join("")}function u(t){for(var e,r=t.length,n=r%3,i="",o=[],a=0,u=r-n;a<u;a+=16383)o.push(s(t,a,a+16383>u?u:a+16383));return 1===n?(e=t[r-1],i+=h[e>>2],i+=h[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=h[e>>10],i+=h[e>>4&63],i+=h[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=i,e.toByteArray=o,e.fromByteArray=u;for(var h=[],f=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=c.length;p<d;++p)h[p]=c[p],f[c.charCodeAt(p)]=p;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,h=u>>1,f=-7,l=r?i-1:0,c=r?-1:1,p=t[e+l];for(l+=c,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+t[e+l],l+=c,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=256*a+t[e+l],l+=c,f-=8);if(0===o)o=1-h;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=h}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,h=8*o-i-1,f=(1<<h)-1,l=f>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+l>=1?c/u:c*Math.pow(2,1-l),e*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*u-1)*Math.pow(2,i),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,h+=i;h>0;t[r+p]=255&a,p+=d,a/=256,h-=8);t[r+p-d]|=128*m}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){var n,i,o,a,s=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;a=r(4),i=r(20),o=r(6),n=function(t){function e(t){e.__super__.constructor.call(this,t),this.renderer=new o,this.input=new i(this.canvas),this.renderer.init(),this.scenes=[],this.activeScene=null}return s(e,t),e.prototype.addScene=function(t){return this.scenes.push(t),this.activeScene=this.scenes.length-1},e.prototype.render=function(){return this.renderer.clear(),this.scenes.forEach(function(t){return function(e,r){if(t.activeScene===r)return t.renderer.render(t.scenes[r])}}(this))},e}(a),t.exports=n},function(t,e,r){var n,i,o=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(21).EventEmitter,i=function(t){function e(t){this.element=t,this.pointerLockError=o(this.pointerLockError,this),this.pointerLockChanged=o(this.pointerLockChanged,this),this.contextMenu=o(this.contextMenu,this),this.mousewheel=o(this.mousewheel,this),this.mousemove=o(this.mousemove,this),this.mouseup=o(this.mouseup,this),this.mousedown=o(this.mousedown,this),this.keydown=o(this.keydown,this),this.keyup=o(this.keyup,this),this.keys={},this.mouse=[],this.wheelDelta=0,this.mouseDelta=[0,0],this.mousePosition=[0,0],this.mousePressed=!1,this.binded=!1,this.init(),this.bind()}return a(e,t),e.prototype.init=function(){var t,e;for(t=e=0;e<=8;t=++e)this.mouse[t]=null;return this.element.setAttribute("tabindex","0"),this.element.focus()},e.prototype.pointerLock=function(){return this.element.addEventListener("click",function(t){return function(){return t.element.requestPointerLock()}}(this))},e.prototype.pointerUnlock=function(){return this.element.exitPointerLock()},e.prototype.bind=function(){return this.element.addEventListener("contextmenu",this.contextMenu),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.addEventListener("mousedown",this.mousedown),window.addEventListener("mouseup",this.mouseup),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mousewheel",this.mousewheel),document.addEventListener("pointerlockchange",this.pointerLockChanged,!1),document.addEventListener("pointerlockerror",this.pointerLockError,!1),this.binded=!0},e.prototype.unbind=function(){return window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.removeEventListener("mousedown",this.mousedown),window.removeEventListener("mouseup",this.mouseup),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mousewheel",this.mousewheel),this.binded=!1},e.prototype.getKey=function(t){return!0===this.keys[t]},e.prototype.keyup=function(t){if(t.target===this.element)return delete this.keys[t.keyCode],this.emit("keyup",t.keyCode)},e.prototype.keydown=function(t){if(t.target===this.element)return this.keys[t.keyCode]=!0,this.emit("keydown",t.keyCode)},e.prototype.mousedown=function(t){if(t.target===this.element)return this.mouse[t.button]=!0,this.mousePressed=!0,this.emit("mousedown",t.button)},e.prototype.mouseup=function(t){if(t.target===this.element)return this.mouse[t.button]=!1,this.mousePressed=!1,this.emit("mouseup",t.button)},e.prototype.mousemove=function(t){return this.mouseDelta=[t.movementX-this.mousePosition[0],t.movementY-this.mousePosition[1]],this.mousePosition=[t.movementX,t.movementY],this.emit("mousemove",this.mousePosition,this.mouseDelta)},e.prototype.mousewheel=function(t){return this.wheelDelta=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),this.emit("mousewheel",this.wheelDelta)},e.prototype.contextMenu=function(t){return t.preventDefault()},e.prototype.pointerLockChanged=function(t){return console.log(t)},e.prototype.pointerLockError=function(t){return console.log(t)},e}(n),t.exports=i},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,s,u,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var f=new Error('Uncaught, unspecified "error" event. ('+e+")");throw f.context=e,f}if(r=this._events[t],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),h=r.slice(),i=h.length,u=0;u<i;u++)h[u].apply(this,s);return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,a,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],a=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(s=a;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){var r;r=function(){function t(t,e){this.name=t,this.data=e,console.log(e),this.texture=null,this.material=null,this.transform=new FNX.Transform}return t.prototype.setMaterial=function(t){return t.shader.setUniformMat4("mTransform",this.transform.getTransformation()),this.material=t},t.prototype.draw=function(){var t,e,r;return r=gl.getAttribLocation(this.material.shader.program,"position"),t=gl.getAttribLocation(this.material.shader.program,"normal"),e=gl.getAttribLocation(this.material.shader.program,"vertTexCoord"),gl.getUniformLocation(this.material.shader.program,"Sampler"),gl.bindBuffer(gl.ARRAY_BUFFER,this.data.vertexBuffer),gl.vertexAttribPointer(r,this.data.vertexBuffer.itemSize,gl.FLOAT,gl.FALSE,0,0),gl.enableVertexAttribArray(r),gl.bindBuffer(gl.ARRAY_BUFFER,this.data.normalBuffer),gl.vertexAttribPointer(t,this.data.normalBuffer.itemSize,gl.FLOAT,gl.FALSE,0,0),gl.enableVertexAttribArray(t),this.material.diffuseTexture&&(gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,this.material.diffuseTexture.texture),gl.bindBuffer(gl.ARRAY_BUFFER,this.data.textureBuffer),gl.vertexAttribPointer(e,this.data.textureBuffer.itemSize,gl.FLOAT,gl.FALSE,0,0),gl.enableVertexAttribArray(e)),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.data.indexBuffer),gl.vertexAttribPointer(3,this.data.indexBuffer.itemSize,gl.FLOAT,gl.FALSE,0,0),gl.enableVertexAttribArray(3),gl.drawElements(gl.TRIANGLES,this.data.indexBuffer.numItems,gl.UNSIGNED_SHORT,0)},t}(),t.exports=r},function(t,e,r){var n,i;i=r(7),n=function(){function t(t,e){this.position=t,this.texCoords=e}return t.prototype.SIZE=4,t.prototype.texCoords=i.vec2.fromValues(0,0),t}(),t.exports=n},function(t,e,r){"use strict";function n(){var t=new S.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function i(t){var e=new S.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function s(t,e,r,n){var i=new S.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function u(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function h(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function f(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*o-i*n;return a?(a=1/a,t[0]=o*a,t[1]=-n*a,t[2]=-i*a,t[3]=r*a,t):null}function l(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function c(t){return t[0]*t[3]-t[2]*t[1]}function p(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1],h=r[2],f=r[3];return t[0]=n*s+o*u,t[1]=i*s+a*u,t[2]=n*h+o*f,t[3]=i*h+a*f,t}function d(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*s,t[1]=i*u+a*s,t[2]=n*-s+o*u,t[3]=i*-s+a*u,t}function m(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1];return t[0]=n*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function v(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function y(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function g(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function M(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function b(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function w(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function E(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function _(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function A(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],h=e[3];return Math.abs(r-a)<=S.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=S.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=S.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-h)<=S.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))}function x(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function P(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=n,e.clone=i,e.copy=o,e.identity=a,e.fromValues=s,e.set=u,e.transpose=h,e.invert=f,e.adjoint=l,e.determinant=c,e.multiply=p,e.rotate=d,e.scale=m,e.fromRotation=v,e.fromScaling=y,e.str=g,e.frob=M,e.LDU=b,e.add=w,e.subtract=E,e.exactEquals=_,e.equals=A,e.multiplyScalar=x,e.multiplyScalarAndAdd=P;var T=r(0),S=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(T);e.mul=p,e.sub=E},function(t,e,r){"use strict";function n(){var t=new T.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function i(t){var e=new T.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(t,e,r,n,i,o){var a=new T.ARRAY_TYPE(6);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a[4]=i,a[5]=o,a}function u(t,e,r,n,i,o,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t}function h(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=r*o-n*i;return u?(u=1/u,t[0]=o*u,t[1]=-n*u,t[2]=-i*u,t[3]=r*u,t[4]=(i*s-o*a)*u,t[5]=(n*a-r*s)*u,t):null}function f(t){return t[0]*t[3]-t[1]*t[2]}function l(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=r[0],f=r[1],l=r[2],c=r[3],p=r[4],d=r[5];return t[0]=n*h+o*f,t[1]=i*h+a*f,t[2]=n*l+o*c,t[3]=i*l+a*c,t[4]=n*p+o*d+s,t[5]=i*p+a*d+u,t}function c(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=Math.sin(r),f=Math.cos(r);return t[0]=n*f+o*h,t[1]=i*f+a*h,t[2]=n*-h+o*f,t[3]=i*-h+a*f,t[4]=s,t[5]=u,t}function p(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=r[0],f=r[1];return t[0]=n*h,t[1]=i*h,t[2]=o*f,t[3]=a*f,t[4]=s,t[5]=u,t}function d(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=r[0],f=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=n*h+o*f+s,t[5]=i*h+a*f+u,t}function m(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function v(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function y(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function g(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function M(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function b(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function w(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function E(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function _(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function A(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function x(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=e[0],h=e[1],f=e[2],l=e[3],c=e[4],p=e[5];return Math.abs(r-u)<=T.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-h)<=T.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-f)<=T.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-l)<=T.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-c)<=T.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-p)<=T.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=n,e.clone=i,e.copy=o,e.identity=a,e.fromValues=s,e.set=u,e.invert=h,e.determinant=f,e.multiply=l,e.rotate=c,e.scale=p,e.translate=d,e.fromRotation=m,e.fromScaling=v,e.fromTranslation=y,e.str=g,e.frob=M,e.add=b,e.subtract=w,e.multiplyScalar=E,e.multiplyScalarAndAdd=_,e.exactEquals=A,e.equals=x;var P=r(0),T=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(P);e.mul=l,e.sub=w},function(t,e,r){"use strict";function n(){var t=new W.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function i(t){var e=new W.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function a(t,e,r,n,i,o,a,s,u,h,f,l,c,p,d,m){var v=new W.ARRAY_TYPE(16);return v[0]=t,v[1]=e,v[2]=r,v[3]=n,v[4]=i,v[5]=o,v[6]=a,v[7]=s,v[8]=u,v[9]=h,v[10]=f,v[11]=l,v[12]=c,v[13]=p,v[14]=d,v[15]=m,v}function s(t,e,r,n,i,o,a,s,u,h,f,l,c,p,d,m,v){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=h,t[9]=f,t[10]=l,t[11]=c,t[12]=p,t[13]=d,t[14]=m,t[15]=v,t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function h(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function f(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],f=e[8],l=e[9],c=e[10],p=e[11],d=e[12],m=e[13],v=e[14],y=e[15],g=r*s-n*a,M=r*u-i*a,b=r*h-o*a,w=n*u-i*s,E=n*h-o*s,_=i*h-o*u,A=f*m-l*d,x=f*v-c*d,P=f*y-p*d,T=l*v-c*m,S=l*y-p*m,R=c*y-p*v,L=g*R-M*S+b*T+w*P-E*x+_*A;return L?(L=1/L,t[0]=(s*R-u*S+h*T)*L,t[1]=(i*S-n*R-o*T)*L,t[2]=(m*_-v*E+y*w)*L,t[3]=(c*E-l*_-p*w)*L,t[4]=(u*P-a*R-h*x)*L,t[5]=(r*R-i*P+o*x)*L,t[6]=(v*b-d*_-y*M)*L,t[7]=(f*_-c*b+p*M)*L,t[8]=(a*S-s*P+h*A)*L,t[9]=(n*P-r*S-o*A)*L,t[10]=(d*E-m*b+y*g)*L,t[11]=(l*b-f*E-p*g)*L,t[12]=(s*x-a*T-u*A)*L,t[13]=(r*T-n*x+i*A)*L,t[14]=(m*M-d*w-v*g)*L,t[15]=(f*w-l*M+c*g)*L,t):null}function l(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],f=e[8],l=e[9],c=e[10],p=e[11],d=e[12],m=e[13],v=e[14],y=e[15];return t[0]=s*(c*y-p*v)-l*(u*y-h*v)+m*(u*p-h*c),t[1]=-(n*(c*y-p*v)-l*(i*y-o*v)+m*(i*p-o*c)),t[2]=n*(u*y-h*v)-s*(i*y-o*v)+m*(i*h-o*u),t[3]=-(n*(u*p-h*c)-s*(i*p-o*c)+l*(i*h-o*u)),t[4]=-(a*(c*y-p*v)-f*(u*y-h*v)+d*(u*p-h*c)),t[5]=r*(c*y-p*v)-f*(i*y-o*v)+d*(i*p-o*c),t[6]=-(r*(u*y-h*v)-a*(i*y-o*v)+d*(i*h-o*u)),t[7]=r*(u*p-h*c)-a*(i*p-o*c)+f*(i*h-o*u),t[8]=a*(l*y-p*m)-f*(s*y-h*m)+d*(s*p-h*l),t[9]=-(r*(l*y-p*m)-f*(n*y-o*m)+d*(n*p-o*l)),t[10]=r*(s*y-h*m)-a*(n*y-o*m)+d*(n*h-o*s),t[11]=-(r*(s*p-h*l)-a*(n*p-o*l)+f*(n*h-o*s)),t[12]=-(a*(l*v-c*m)-f*(s*v-u*m)+d*(s*c-u*l)),t[13]=r*(l*v-c*m)-f*(n*v-i*m)+d*(n*c-i*l),t[14]=-(r*(s*v-u*m)-a*(n*v-i*m)+d*(n*u-i*s)),t[15]=r*(s*c-u*l)-a*(n*c-i*l)+f*(n*u-i*s),t}function c(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],h=t[8],f=t[9],l=t[10],c=t[11],p=t[12],d=t[13],m=t[14],v=t[15];return(e*a-r*o)*(l*v-c*m)-(e*s-n*o)*(f*v-c*d)+(e*u-i*o)*(f*m-l*d)+(r*s-n*a)*(h*v-c*p)-(r*u-i*a)*(h*m-l*p)+(n*u-i*s)*(h*d-f*p)}function p(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],f=e[7],l=e[8],c=e[9],p=e[10],d=e[11],m=e[12],v=e[13],y=e[14],g=e[15],M=r[0],b=r[1],w=r[2],E=r[3];return t[0]=M*n+b*s+w*l+E*m,t[1]=M*i+b*u+w*c+E*v,t[2]=M*o+b*h+w*p+E*y,t[3]=M*a+b*f+w*d+E*g,M=r[4],b=r[5],w=r[6],E=r[7],t[4]=M*n+b*s+w*l+E*m,t[5]=M*i+b*u+w*c+E*v,t[6]=M*o+b*h+w*p+E*y,t[7]=M*a+b*f+w*d+E*g,M=r[8],b=r[9],w=r[10],E=r[11],t[8]=M*n+b*s+w*l+E*m,t[9]=M*i+b*u+w*c+E*v,t[10]=M*o+b*h+w*p+E*y,t[11]=M*a+b*f+w*d+E*g,M=r[12],b=r[13],w=r[14],E=r[15],t[12]=M*n+b*s+w*l+E*m,t[13]=M*i+b*u+w*c+E*v,t[14]=M*o+b*h+w*p+E*y,t[15]=M*a+b*f+w*d+E*g,t}function d(t,e,r){var n=r[0],i=r[1],o=r[2],a=void 0,s=void 0,u=void 0,h=void 0,f=void 0,l=void 0,c=void 0,p=void 0,d=void 0,m=void 0,v=void 0,y=void 0;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*o+e[12],t[13]=e[1]*n+e[5]*i+e[9]*o+e[13],t[14]=e[2]*n+e[6]*i+e[10]*o+e[14],t[15]=e[3]*n+e[7]*i+e[11]*o+e[15]):(a=e[0],s=e[1],u=e[2],h=e[3],f=e[4],l=e[5],c=e[6],p=e[7],d=e[8],m=e[9],v=e[10],y=e[11],t[0]=a,t[1]=s,t[2]=u,t[3]=h,t[4]=f,t[5]=l,t[6]=c,t[7]=p,t[8]=d,t[9]=m,t[10]=v,t[11]=y,t[12]=a*n+f*i+d*o+e[12],t[13]=s*n+l*i+m*o+e[13],t[14]=u*n+c*i+v*o+e[14],t[15]=h*n+p*i+y*o+e[15]),t}function m(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function v(t,e,r,n){var i=n[0],o=n[1],a=n[2],s=Math.sqrt(i*i+o*o+a*a),u=void 0,h=void 0,f=void 0,l=void 0,c=void 0,p=void 0,d=void 0,m=void 0,v=void 0,y=void 0,g=void 0,M=void 0,b=void 0,w=void 0,E=void 0,_=void 0,A=void 0,x=void 0,P=void 0,T=void 0,S=void 0,R=void 0,L=void 0,I=void 0;return Math.abs(s)<W.EPSILON?null:(s=1/s,i*=s,o*=s,a*=s,u=Math.sin(r),h=Math.cos(r),f=1-h,l=e[0],c=e[1],p=e[2],d=e[3],m=e[4],v=e[5],y=e[6],g=e[7],M=e[8],b=e[9],w=e[10],E=e[11],_=i*i*f+h,A=o*i*f+a*u,x=a*i*f-o*u,P=i*o*f-a*u,T=o*o*f+h,S=a*o*f+i*u,R=i*a*f+o*u,L=o*a*f-i*u,I=a*a*f+h,t[0]=l*_+m*A+M*x,t[1]=c*_+v*A+b*x,t[2]=p*_+y*A+w*x,t[3]=d*_+g*A+E*x,t[4]=l*P+m*T+M*S,t[5]=c*P+v*T+b*S,t[6]=p*P+y*T+w*S,t[7]=d*P+g*T+E*S,t[8]=l*R+m*L+M*I,t[9]=c*R+v*L+b*I,t[10]=p*R+y*L+w*I,t[11]=d*R+g*L+E*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function y(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],u=e[7],h=e[8],f=e[9],l=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+h*n,t[5]=a*i+f*n,t[6]=s*i+l*n,t[7]=u*i+c*n,t[8]=h*i-o*n,t[9]=f*i-a*n,t[10]=l*i-s*n,t[11]=c*i-u*n,t}function g(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],h=e[8],f=e[9],l=e[10],c=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-h*n,t[1]=a*i-f*n,t[2]=s*i-l*n,t[3]=u*i-c*n,t[8]=o*n+h*i,t[9]=a*n+f*i,t[10]=s*n+l*i,t[11]=u*n+c*i,t}function M(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],h=e[4],f=e[5],l=e[6],c=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+h*n,t[1]=a*i+f*n,t[2]=s*i+l*n,t[3]=u*i+c*n,t[4]=h*i-o*n,t[5]=f*i-a*n,t[6]=l*i-s*n,t[7]=c*i-u*n,t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function w(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,e,r){var n=r[0],i=r[1],o=r[2],a=Math.sqrt(n*n+i*i+o*o),s=void 0,u=void 0,h=void 0;return Math.abs(a)<W.EPSILON?null:(a=1/a,n*=a,i*=a,o*=a,s=Math.sin(e),u=Math.cos(e),h=1-u,t[0]=n*n*h+u,t[1]=i*n*h+o*s,t[2]=o*n*h-i*s,t[3]=0,t[4]=n*i*h-o*s,t[5]=i*i*h+u,t[6]=o*i*h+n*s,t[7]=0,t[8]=n*o*h+i*s,t[9]=i*o*h-n*s,t[10]=o*o*h+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function _(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function x(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,u=i+i,h=o+o,f=n*s,l=n*u,c=n*h,p=i*u,d=i*h,m=o*h,v=a*s,y=a*u,g=a*h;return t[0]=1-(p+m),t[1]=l+g,t[2]=c-y,t[3]=0,t[4]=l-g,t[5]=1-(f+m),t[6]=d+v,t[7]=0,t[8]=c+y,t[9]=d-v,t[10]=1-(f+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function T(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function S(t,e){var r=e[0],n=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],h=e[9],f=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(o*o+a*a+s*s),t[2]=Math.sqrt(u*u+h*h+f*f),t}function R(t,e){var r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function L(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,h=o+o,f=a+a,l=i*u,c=i*h,p=i*f,d=o*h,m=o*f,v=a*f,y=s*u,g=s*h,M=s*f,b=n[0],w=n[1],E=n[2];return t[0]=(1-(d+v))*b,t[1]=(c+M)*b,t[2]=(p-g)*b,t[3]=0,t[4]=(c-M)*w,t[5]=(1-(l+v))*w,t[6]=(m+y)*w,t[7]=0,t[8]=(p+g)*E,t[9]=(m-y)*E,t[10]=(1-(l+d))*E,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function I(t,e,r,n,i){var o=e[0],a=e[1],s=e[2],u=e[3],h=o+o,f=a+a,l=s+s,c=o*h,p=o*f,d=o*l,m=a*f,v=a*l,y=s*l,g=u*h,M=u*f,b=u*l,w=n[0],E=n[1],_=n[2],A=i[0],x=i[1],P=i[2];return t[0]=(1-(m+y))*w,t[1]=(p+b)*w,t[2]=(d-M)*w,t[3]=0,t[4]=(p-b)*E,t[5]=(1-(c+y))*E,t[6]=(v+g)*E,t[7]=0,t[8]=(d+M)*_,t[9]=(v-g)*_,t[10]=(1-(c+m))*_,t[11]=0,t[12]=r[0]+A-(t[0]*A+t[4]*x+t[8]*P),t[13]=r[1]+x-(t[1]*A+t[5]*x+t[9]*P),t[14]=r[2]+P-(t[2]*A+t[6]*x+t[10]*P),t[15]=1,t}function N(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,h=r*a,f=n*a,l=n*s,c=i*a,p=i*s,d=i*u,m=o*a,v=o*s,y=o*u;return t[0]=1-l-d,t[1]=f+y,t[2]=c-v,t[3]=0,t[4]=f-y,t[5]=1-h-d,t[6]=p+m,t[7]=0,t[8]=c+v,t[9]=p-m,t[10]=1-h-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e,r,n,i,o,a){var s=1/(r-e),u=1/(i-n),h=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*u,t[10]=(a+o)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*h,t[15]=0,t}function C(t,e,r,n,i){var o=1/Math.tan(e/2),a=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t}function F(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),h=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*h*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function k(t,e,r,n,i,o,a){var s=1/(e-r),u=1/(n-i),h=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(a+o)*h,t[15]=1,t}function B(t,e,r,n){var i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,h=void 0,f=void 0,l=void 0,c=void 0,p=void 0,d=e[0],m=e[1],v=e[2],y=n[0],g=n[1],M=n[2],b=r[0],w=r[1],E=r[2];return Math.abs(d-b)<W.EPSILON&&Math.abs(m-w)<W.EPSILON&&Math.abs(v-E)<W.EPSILON?mat4.identity(t):(f=d-b,l=m-w,c=v-E,p=1/Math.sqrt(f*f+l*l+c*c),f*=p,l*=p,c*=p,i=g*c-M*l,o=M*f-y*c,a=y*l-g*f,p=Math.sqrt(i*i+o*o+a*a),p?(p=1/p,i*=p,o*=p,a*=p):(i=0,o=0,a=0),s=l*a-c*o,u=c*i-f*a,h=f*o-l*i,p=Math.sqrt(s*s+u*u+h*h),p?(p=1/p,s*=p,u*=p,h*=p):(s=0,u=0,h=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=o,t[5]=u,t[6]=l,t[7]=0,t[8]=a,t[9]=h,t[10]=c,t[11]=0,t[12]=-(i*d+o*m+a*v),t[13]=-(s*d+u*m+h*v),t[14]=-(f*d+l*m+c*v),t[15]=1,t)}function U(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=n[0],u=n[1],h=n[2],f=i-r[0],l=o-r[1],c=a-r[2],p=f*f+l*l+c*c;p>0&&(p=1/Math.sqrt(p),f*=p,l*=p,c*=p);var d=u*c-h*l,m=h*f-s*c,v=s*l-u*f;return t[0]=d,t[1]=m,t[2]=v,t[3]=0,t[4]=l*v-c*m,t[5]=c*d-f*v,t[6]=f*m-l*d,t[7]=0,t[8]=f,t[9]=l,t[10]=c,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function D(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function q(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function j(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function X(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function V(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function z(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function H(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],h=t[7],f=t[8],l=t[9],c=t[10],p=t[11],d=t[12],m=t[13],v=t[14],y=t[15],g=e[0],M=e[1],b=e[2],w=e[3],E=e[4],_=e[5],A=e[6],x=e[7],P=e[8],T=e[9],S=e[10],R=e[11],L=e[12],I=e[13],N=e[14],O=e[15];return Math.abs(r-g)<=W.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-M)<=W.EPSILON*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(i-b)<=W.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-w)<=W.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-E)<=W.EPSILON*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(s-_)<=W.EPSILON*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(u-A)<=W.EPSILON*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(h-x)<=W.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(f-P)<=W.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(l-T)<=W.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-S)<=W.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(p-R)<=W.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(d-L)<=W.EPSILON*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(m-I)<=W.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(v-N)<=W.EPSILON*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(y-O)<=W.EPSILON*Math.max(1,Math.abs(y),Math.abs(O))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=n,e.clone=i,e.copy=o,e.fromValues=a,e.set=s,e.identity=u,e.transpose=h,e.invert=f,e.adjoint=l,e.determinant=c,e.multiply=p,e.translate=d,e.scale=m,e.rotate=v,e.rotateX=y,e.rotateY=g,e.rotateZ=M,e.fromTranslation=b,e.fromScaling=w,e.fromRotation=E,e.fromXRotation=_,e.fromYRotation=A,e.fromZRotation=x,e.fromRotationTranslation=P,e.getTranslation=T,e.getScaling=S,e.getRotation=R,e.fromRotationTranslationScale=L,e.fromRotationTranslationScaleOrigin=I,e.fromQuat=N,e.frustum=O,e.perspective=C,e.perspectiveFromFieldOfView=F,e.ortho=k,e.lookAt=B,e.targetTo=U,e.str=D,e.frob=Y,e.add=q,e.subtract=j,e.multiplyScalar=X,e.multiplyScalarAndAdd=V,e.exactEquals=z,e.equals=H;var G=r(0),W=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(G);e.mul=p,e.sub=j},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(){var t=new b.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function a(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function s(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function u(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1],h=r[2],f=r[3];return t[0]=n*f+a*s+i*h-o*u,t[1]=i*f+a*u+o*s-n*h,t[2]=o*f+a*h+n*u-i*s,t[3]=a*f-n*s-i*u-o*h,t}function h(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-n*s,t}function f(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u-o*s,t[1]=i*u+a*s,t[2]=o*u+n*s,t[3]=a*u-i*s,t}function l(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=i*u-n*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t}function c(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function p(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3],u=r[0],h=r[1],f=r[2],l=r[3],c=void 0,p=void 0,d=void 0,m=void 0,v=void 0;return p=i*u+o*h+a*f+s*l,p<0&&(p=-p,u=-u,h=-h,f=-f,l=-l),1-p>1e-6?(c=Math.acos(p),d=Math.sin(c),m=Math.sin((1-n)*c)/d,v=Math.sin(n*c)/d):(m=1-n,v=n),t[0]=m*i+v*u,t[1]=m*o+v*h,t[2]=m*a+v*f,t[3]=m*s+v*l,t}function d(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=o*s,t}function m(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function v(t,e){var r=e[0]+e[4]+e[8],n=void 0;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}function y(t,e,r,n){var i=.5*Math.PI/180;e*=i,r*=i,n*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(r),u=Math.cos(r),h=Math.sin(n),f=Math.cos(n);return t[0]=o*u*f-a*s*h,t[1]=a*s*f+o*u*h,t[2]=a*u*h-o*s*f,t[3]=a*u*f+o*s*h,t}function g(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=i,e.identity=o,e.setAxisAngle=a,e.getAxisAngle=s,e.multiply=u,e.rotateX=h,e.rotateY=f,e.rotateZ=l,e.calculateW=c,e.slerp=p,e.invert=d,e.conjugate=m,e.fromMat3=v,e.fromEuler=y,e.str=g;var M=r(0),b=n(M),w=r(8),E=n(w),_=r(9),A=n(_),x=r(10),P=n(x),T=(e.clone=P.clone,e.fromValues=P.fromValues,e.copy=P.copy,e.set=P.set,e.add=P.add,e.mul=u,e.scale=P.scale,e.dot=P.dot,e.lerp=P.lerp,e.length=P.length),S=(e.len=T,e.squaredLength=P.squaredLength),R=(e.sqrLen=S,e.normalize=P.normalize);e.exactEquals=P.exactEquals,e.equals=P.equals,e.rotationTo=function(){var t=A.create(),e=A.fromValues(1,0,0),r=A.fromValues(0,1,0);return function(n,i,o){var s=A.dot(i,o);return s<-.999999?(A.cross(t,e,i),A.len(t)<1e-6&&A.cross(t,r,i),A.normalize(t,t),a(n,t,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(A.cross(t,i,o),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+s,R(n,n))}}(),e.sqlerp=function(){var t=i(),e=i();return function(r,n,i,o,a,s){return p(t,n,a,s),p(e,i,o,s),p(r,t,e,2*s*(1-s)),r}}(),e.setAxes=function(){var t=E.create();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],R(e,v(e,t))}}()},function(t,e,r){"use strict";function n(){var t=new U.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function i(t){var e=new U.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function o(t,e){var r=new U.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r}function a(t,e){return t[0]=e[0],t[1]=e[1],t}function s(t,e,r){return t[0]=e,t[1]=r,t}function u(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function h(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function f(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function l(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function c(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function d(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function m(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function v(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function y(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function g(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function M(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function b(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function w(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function E(t){var e=t[0],r=t[1];return e*e+r*r}function _(t,e){return t[0]=-e[0],t[1]=-e[1],t}function A(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function x(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}function P(t,e){return t[0]*e[0]+t[1]*e[1]}function T(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function S(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t}function R(t,e){e=e||1;var r=2*U.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function L(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function I(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function N(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function O(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function C(t){return"vec2("+t[0]+", "+t[1]+")"}function F(t,e){return t[0]===e[0]&&t[1]===e[1]}function k(t,e){var r=t[0],n=t[1],i=e[0],o=e[1];return Math.abs(r-i)<=U.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=U.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=n,e.clone=i,e.fromValues=o,e.copy=a,e.set=s,e.add=u,e.subtract=h,e.multiply=f,e.divide=l,e.ceil=c,e.floor=p,e.min=d,e.max=m,e.round=v,e.scale=y,e.scaleAndAdd=g,e.distance=M,e.squaredDistance=b,e.length=w,e.squaredLength=E,e.negate=_,e.inverse=A,e.normalize=x,e.dot=P,e.cross=T,e.lerp=S,e.random=R,e.transformMat2=L,e.transformMat2d=I,e.transformMat3=N,e.transformMat4=O,e.str=C,e.exactEquals=F,e.equals=k;var B=r(0),U=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(B);e.len=w,e.sub=h,e.mul=f,e.div=l,e.dist=M,e.sqrDist=b,e.sqrLen=E,e.forEach=function(){var t=n();return function(e,r,n,i,o,a){var s=void 0,u=void 0;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,r){(function(e){var n,i,o;i=r(12),o=r(30).Parser,n=function(){function t(t){this.scene=t}return t.prototype.textures={},t.prototype.shaders_dir="../res/shaders",t.prototype.textures_dir="../res/textures",t.prototype.models_dir="../res/models",t.prototype.bsp_dir="../res/bsp",t.prototype.getFile=function(t){return new Promise(function(e){return function(e,r){return i.get({url:t},function(t,n){if(t&&r(t),!t)return e(n)})}}())},t.prototype.loadImage=function(t){return new Promise(function(e){return function(r){var n;return n=new Image,n.src=e.textures_dir+"/"+t,n.onload=function(){return e.textures[t]={name:t,image:n},r(e.textures[t])}}}(this))},t.prototype.loadShader=function(t){return new Promise(function(e){return function(r,n){return Promise.all([e.getFile(e.shaders_dir+"/"+t+".vert"),e.getFile(e.shaders_dir+"/"+t+".frag")]).then(function(n){var i;return i={vertex:n[0],fragment:n[1]},e.scene.shaders[t]=i,r(i)}).catch(function(t){return n(t)})}}(this))},t.prototype.loadBsp=function(t){return new Promise(function(r){return function(n){return r.getFile(r.bsp_dir+"/"+t+".bsp").then(function(t){var r,i,a;return i=new e(t),a=(new o).endianess("little").int32("offset").int32("length").int32("version").bit4("code"),r=(new o).endianess("little").int32("bsp_ident",{assert:1347633750}).int32("bsp_version").array("lumps",{type:a,length:64}).int32("revision"),console.log(r.parse(i)),n()})}}(this))},t.prototype.loadMesh=function(t){return new Promise(function(e){return function(r,n){return e.getFile(e.models_dir+"/"+t+".obj").then(function(n){var i,o;return o=new FNX.OBJ.Mesh(n),FNX.OBJ.initMeshBuffers(gl,o),i=new FNX.Mesh(t,o),e.scene.meshes[t]=i,r(i)})}}(this))},t}(),t.exports=n}).call(e,r(3).Buffer)},function(t,e,r){var n=r(31).Context,i={UInt8:1,UInt16LE:2,UInt16BE:2,UInt32LE:4,UInt32BE:4,Int8:1,Int16LE:2,Int16BE:2,Int32LE:4,Int32BE:4,FloatLE:4,FloatBE:4,DoubleLE:8,DoubleBE:8},o={String:null,Buffer:null,Array:null,Skip:null,Choice:null,Nest:null,Bit:null},a={},s=[];!function(){var t;for(t=1;t<=32;t++)s.push(t)}();var u={};Object.keys(i).concat(Object.keys(o)).forEach(function(t){u[t.toLowerCase()]=t});var h=function(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="be",this.constructorFn=null,this.alias=null};h.start=function(){return new h},Object.keys(i).forEach(function(t){h.prototype[t.toLowerCase()]=function(e,r){return this.setNextParser(t.toLowerCase(),e,r)};var e=t.replace(/BE|LE/,"").toLowerCase();e in h.prototype||(h.prototype[e]=function(t,r){return this[e+this.endian](t,r)})}),s.forEach(function(t){h.prototype["bit"+t.toString()]=function(e,r){return r||(r={}),r.length=t,this.setNextParser("bit",e,r)}}),h.prototype.namely=function(t){return a[t]=this,this.alias=t,this},h.prototype.skip=function(t,e){if(e&&e.assert)throw new Error("assert option on skip is not allowed.");return this.setNextParser("skip","",{length:t})},h.prototype.string=function(t,e){if(!e.zeroTerminated&&!e.length&&!e.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((e.zeroTerminated||e.length)&&e.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(e.stripNull&&!e.length&&!e.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return e.encoding=e.encoding||"utf8",this.setNextParser("string",t,e)},h.prototype.buffer=function(t,e){if(!e.length&&!e.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",t,e)},h.prototype.array=function(t,e){if(!e.readUntil&&!e.length&&!e.lengthInBytes)throw new Error("Length option of array is not defined.");if(!e.type)throw new Error("Type option of array is not defined.");if("string"==typeof e.type&&!a[e.type]&&Object.keys(i).indexOf(u[e.type])<0)throw new Error('Specified primitive type "'+e.type+'" is not supported.');return this.setNextParser("array",t,e)},h.prototype.choice=function(t,e){if(!e.tag)throw new Error("Tag option of array is not defined.");if(!e.choices)throw new Error("Choices option of array is not defined.");return Object.keys(e.choices).forEach(function(r){if(isNaN(parseInt(r,10)))throw new Error("Key of choices must be a number.");if(!e.choices[r])throw new Error("Choice Case "+r+" of "+t+" is not valid.");if("string"==typeof e.choices[r]&&!a[e.choices[r]]&&Object.keys(i).indexOf(u[e.choices[r]])<0)throw new Error('Specified primitive type "'+e.choices[r]+'" is not supported.')},this),this.setNextParser("choice",t,e)},h.prototype.nest=function(t,e){if(!e.type)throw new Error("Type option of nest is not defined.");if(!(e.type instanceof h||a[e.type]))throw new Error("Type option of nest must be a Parser object.");return this.setNextParser("nest",t,e)},h.prototype.endianess=function(t){switch(t.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: "+t)}return this},h.prototype.create=function(t){if(!(t instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=t,this},h.prototype.getCode=function(){var t=new n;return t.pushCode("if (!Buffer.isBuffer(buffer)) {"),t.generateError('"argument buffer is not a Buffer object"'),t.pushCode("}"),this.alias?this.addAliasedCode(t):this.addRawCode(t),this.alias?t.pushCode("return {0}(0).result;","___parser_"+this.alias):t.pushCode("return vars;"),t.code},h.prototype.addRawCode=function(t){t.pushCode("var offset = 0;"),this.constructorFn?t.pushCode("var vars = new constructorFn();"):t.pushCode("var vars = {};"),this.generate(t),this.resolveReferences(t),t.pushCode("return vars;")},h.prototype.addAliasedCode=function(t){return t.pushCode("function {0}(offset) {","___parser_"+this.alias),this.constructorFn?t.pushCode("var vars = new constructorFn();"):t.pushCode("var vars = {};"),this.generate(t),t.markResolved(this.alias),this.resolveReferences(t),t.pushCode("return { offset: offset, result: vars };"),t.pushCode("}"),t},h.prototype.resolveReferences=function(t){var e=t.getUnresolvedReferences();t.markRequested(e),e.forEach(function(e){a[e].addAliasedCode(t)})},h.prototype.compile=function(){this.compiled=new Function("buffer","callback","constructorFn",this.getCode())},h.prototype.sizeOf=function(){var t=NaN;if(Object.keys(i).indexOf(this.type)>=0)t=i[this.type];else if("String"===this.type&&"number"==typeof this.options.length)t=this.options.length;else if("Buffer"===this.type&&"number"==typeof this.options.length)t=this.options.length;else if("Array"===this.type&&"number"==typeof this.options.length){var e=NaN;"string"==typeof this.options.type?e=i[u[this.options.type]]:this.options.type instanceof h&&(e=this.options.type.sizeOf()),t=this.options.length*e}else"Skip"===this.type?t=this.options.length:"Nest"===this.type?t=this.options.type.sizeOf():this.type||(t=0);return this.next&&(t+=this.next.sizeOf()),t},h.prototype.parse=function(t,e){return this.compiled||this.compile(),this.compiled(t,e,this.constructorFn)},h.prototype.setNextParser=function(t,e,r){var n=new h;return n.type=u[t],n.varName=e,n.options=r||n.options,n.endian=this.endian,this.head?this.head.next=n:this.next=n,this.head=n,this},h.prototype.generate=function(t){this.type&&(this["generate"+this.type](t),this.generateAssert(t));var e=t.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(t,e,this.options.formatter),this.generateNext(t)},h.prototype.generateAssert=function(t){if(this.options.assert){var e=t.generateVariable(this.varName);switch(typeof this.options.assert){case"function":t.pushCode("if (!({0}).call(vars, {1})) {",this.options.assert,e);break;case"number":t.pushCode("if ({0} !== {1}) {",this.options.assert,e);break;case"string":t.pushCode('if ("{0}" !== {1}) {',this.options.assert,e);break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}t.generateError('"Assert error: {0} is " + {0}',e),t.pushCode("}")}},h.prototype.generateNext=function(t){return this.next&&(t=this.next.generate(t)),t},Object.keys(i).forEach(function(t){h.prototype["generate"+t]=function(e){e.pushCode("{0} = buffer.read{1}(offset);",e.generateVariable(this.varName),t),e.pushCode("offset += {0};",i[t])}}),h.prototype.generateBit=function(t){var e=JSON.parse(JSON.stringify(this));if(e.varName=t.generateVariable(e.varName),t.bitFields.push(e),!this.next||this.next&&["Bit","Nest"].indexOf(this.next.type)<0){var r=0;t.bitFields.forEach(function(t){r+=t.options.length});var n=t.generateTmpVariable();if(r<=8)t.pushCode("var {0} = buffer.readUInt8(offset);",n),r=8;else if(r<=16)t.pushCode("var {0} = buffer.readUInt16BE(offset);",n),r=16;else if(r<=24){var i=t.generateTmpVariable(),o=t.generateTmpVariable();t.pushCode("var {0} = buffer.readUInt16BE(offset);",i),t.pushCode("var {0} = buffer.readUInt8(offset + 2);",o),t.pushCode("var {2} = ({0} << 8) | {1};",i,o,n),r=24}else{if(!(r<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");t.pushCode("var {0} = buffer.readUInt32BE(offset);",n),r=32}t.pushCode("offset += {0};",r/8);var a=0,s="be"===this.endian;t.bitFields.forEach(function(e){t.pushCode("{0} = {1} >> {2} & {3};",e.varName,n,s?r-a-e.options.length:a,(1<<e.options.length)-1),a+=e.options.length}),t.bitFields=[]}},h.prototype.generateSkip=function(t){var e=t.generateOption(this.options.length);t.pushCode("offset += {0};",e)},h.prototype.generateString=function(t){var e=t.generateVariable(this.varName),r=t.generateTmpVariable();this.options.length&&this.options.zeroTerminated?(t.pushCode("var {0} = offset;",r),t.pushCode("while(buffer.readUInt8(offset++) !== 0 && offset - {0}  < {1});",r,this.options.length),t.pushCode("{0} = buffer.toString('{1}', {2}, offset - {2} < {3} ? offset - 1 : offset);",e,this.options.encoding,r,this.options.length)):this.options.length?(t.pushCode("{0} = buffer.toString('{1}', offset, offset + {2});",e,this.options.encoding,t.generateOption(this.options.length)),t.pushCode("offset += {0};",t.generateOption(this.options.length))):this.options.zeroTerminated?(t.pushCode("var {0} = offset;",r),t.pushCode("while(buffer.readUInt8(offset++) !== 0);"),t.pushCode("{0} = buffer.toString('{1}', {2}, offset - 1);",e,this.options.encoding,r)):this.options.greedy&&(t.pushCode("var {0} = offset;",r),t.pushCode("while(buffer.length > offset++);"),t.pushCode("{0} = buffer.toString('{1}', {2}, offset);",e,this.options.encoding,r)),this.options.stripNull&&t.pushCode("{0} = {0}.replace(/\\x00+$/g, '')",e)},h.prototype.generateBuffer=function(t){if("eof"===this.options.readUntil?t.pushCode("{0} = buffer.slice(offset);",t.generateVariable(this.varName)):(t.pushCode("{0} = buffer.slice(offset, offset + {1});",t.generateVariable(this.varName),t.generateOption(this.options.length)),t.pushCode("offset += {0};",t.generateOption(this.options.length))),this.options.clone){var e=t.generateTmpVariable();t.pushCode("var {0} = new Buffer({1}.length);",e,t.generateVariable(this.varName)),t.pushCode("{0}.copy({1});",t.generateVariable(this.varName),e),t.pushCode("{0} = {1}",t.generateVariable(this.varName),e)}},h.prototype.generateArray=function(t){var e=t.generateOption(this.options.length),r=t.generateOption(this.options.lengthInBytes),n=this.options.type,o=t.generateTmpVariable(),s=t.generateVariable(this.varName),f=t.generateTmpVariable(),l=this.options.key,c="string"==typeof l;if(c?t.pushCode("{0} = {};",s):t.pushCode("{0} = [];",s),"function"==typeof this.options.readUntil?t.pushCode("do {"):"eof"===this.options.readUntil?t.pushCode("for (var {0} = 0; offset < buffer.length; {0}++) {",o):void 0!==r?t.pushCode("for (var {0} = offset; offset - {0} < {1}; ) {",o,r):t.pushCode("for (var {0} = 0; {0} < {1}; {0}++) {",o,e),"string"==typeof n)if(a[n]){var p=t.generateTmpVariable();t.pushCode("var {0} = {1}(offset);",p,"___parser_"+n),t.pushCode("var {0} = {1}.result; offset = {1}.offset;",f,p),n!==this.alias&&t.addReference(n)}else t.pushCode("var {0} = buffer.read{1}(offset);",f,u[n]),t.pushCode("offset += {0};",i[u[n]]);else n instanceof h&&(t.pushCode("var {0} = {};",f),t.pushScope(f),n.generate(t),t.popScope());c?t.pushCode("{0}[{2}.{1}] = {2};",s,l,f):t.pushCode("{0}.push({1});",s,f),t.pushCode("}"),"function"==typeof this.options.readUntil&&t.pushCode(" while (!({0}).call(this, {1}, buffer.slice(offset)));",this.options.readUntil,f)},h.prototype.generateChoiceCase=function(t,e,r){if("string"==typeof r)if(a[r]){var n=t.generateTmpVariable();t.pushCode("var {0} = {1}(offset);",n,"___parser_"+r),t.pushCode("{0} = {1}.result; offset = {1}.offset;",t.generateVariable(this.varName),n),r!==this.alias&&t.addReference(r)}else t.pushCode("{0} = buffer.read{1}(offset);",t.generateVariable(this.varName),u[r]),t.pushCode("offset += {0};",i[u[r]]);else r instanceof h&&(t.pushPath(e),r.generate(t),t.popPath(e))},h.prototype.generateChoice=function(t){var e=t.generateOption(this.options.tag);this.varName&&t.pushCode("{0} = {};",t.generateVariable(this.varName)),t.pushCode("switch({0}) {",e),Object.keys(this.options.choices).forEach(function(e){var r=this.options.choices[e];t.pushCode("case {0}:",e),this.generateChoiceCase(t,this.varName,r),t.pushCode("break;")},this),t.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(t,this.varName,this.options.defaultChoice):t.generateError('"Met undefined tag value " + {0} + " at choice"',e),t.pushCode("}")},h.prototype.generateNest=function(t){var e=t.generateVariable(this.varName);if(this.options.type instanceof h)t.pushCode("{0} = {};",e),t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName);else if(a[this.options.type]){var r=t.generateTmpVariable();t.pushCode("var {0} = {1}(offset);",r,"___parser_"+this.options.type),t.pushCode("{0} = {1}.result; offset = {1}.offset;",e,r),this.options.type!==this.alias&&t.addReference(this.options.type)}},h.prototype.generateFormatter=function(t,e,r){"function"==typeof r&&t.pushCode("{0} = ({1}).call(this, {0});",e,r)},h.prototype.isInteger=function(){return!!this.type.match(/U?Int[8|16|32][BE|LE]?|Bit\d+/)},e.Parser=h},function(t,e){var r=function(){this.code="",this.scopes=[["vars"]],this.isAsync=!1,this.bitFields=[],this.tmpVariableCount=0,this.references={}};r.prototype.generateVariable=function(t){var e=[];return Array.prototype.push.apply(e,this.scopes[this.scopes.length-1]),t&&e.push(t),e.join(".")},r.prototype.generateOption=function(t){switch(typeof t){case"number":return t.toString();case"string":return this.generateVariable(t);case"function":return"("+t+").call("+this.generateVariable()+", vars)"}},r.prototype.generateError=function(){var t=Array.prototype.slice.call(arguments),e=r.interpolate.apply(this,t);this.isAsync?this.pushCode("return process.nextTick(function() { callback(new Error("+e+"), vars); });"):this.pushCode("throw new Error("+e+");")},r.prototype.generateTmpVariable=function(){return"$tmp"+this.tmpVariableCount++},r.prototype.pushCode=function(){var t=Array.prototype.slice.call(arguments);this.code+=r.interpolate.apply(this,t)+"\n"},r.prototype.pushPath=function(t){t&&this.scopes[this.scopes.length-1].push(t)},r.prototype.popPath=function(t){t&&this.scopes[this.scopes.length-1].pop()},r.prototype.pushScope=function(t){this.scopes.push([t])},r.prototype.popScope=function(){this.scopes.pop()},r.prototype.addReference=function(t){this.references[t]||(this.references[t]={resolved:!1,requested:!1})},r.prototype.markResolved=function(t){this.references[t].resolved=!0},r.prototype.markRequested=function(t){t.forEach(function(t){this.references[t].requested=!0}.bind(this))},r.prototype.getUnresolvedReferences=function(){var t=this.references;return Object.keys(this.references).filter(function(e){return!t[e].resolved&&!t[e].requested})},r.interpolate=function(t){var e=/{\d+}/g,r=t.match(e),n=Array.prototype.slice.call(arguments,1);return r&&r.forEach(function(e){var r=parseInt(e.substr(1,e.length-2),10);t=t.replace(e,n[r].toString())}),t},e.Context=r},function(t,e){t.exports=function(){function t(){this.identity=FNX.glm.mat4.create(),this.translation=FNX.glm.mat4.create(),this.rotation=FNX.glm.mat4.create(),this.scaling=FNX.glm.mat4.create()}return t.prototype.getTransformation=function(){var t;return t=FNX.glm.mat4.create(),FNX.glm.mat4.mul(t,this.scaling,t),FNX.glm.mat4.mul(t,this.rotation,t),FNX.glm.mat4.mul(t,this.translation,t)},t.prototype.translate=function(t){return null==t&&(t=[0,0,0]),FNX.glm.mat4.translate(this.translation,this.identity,t)},t.prototype.rotate=function(t,e){return null==e&&(e=[1,1,1]),FNX.glm.mat4.rotate(this.rotation,this.identity,t,e)},t.prototype.scale=function(t){return null==t&&(t=[1,1,1]),FNX.glm.mat4.scale(this.scaling,this.identity,t)},t}()},function(t,e){var r;r=function(){function t(t,e){this.name=t,this.engine=e,this.meshes={},this.shaders={},this.materials=[],this.textures={},this.lights=[],this.ambientColor=[.15,.15,.15],this.texturesIndex=-1,this.activeCamera=null,this.setClearColor(),this.engine.addScene(this)}return t.prototype.setClearColor=function(t,e,r,n){return null==t&&(t=.2),null==e&&(e=.2),null==r&&(r=.2),null==n&&(n=0),gl.clearColor(t,e,r,n)},t.prototype.addTexture=function(t){return this.textures[name]=t,this.texturesIndex++},t.prototype.getMeshByName=function(t){var e;for(e in this.meshes)if(e===t)return this.meshes[t]},t}(),t.exports=r},function(t,e,r){var n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=r(13),t.exports=function(t){function e(t,r){null==r&&(r={}),e.__super__.constructor.call(this,t),this.wheelSensitivity=50,this.position=r.position||FNX.glm.vec3.create(),this.rotation=r.rotation||FNX.glm.vec3.create(),this.positionSpeed=r.positionSpeed||10,this.rotationSpeed=r.rotationSpeed||.1,this.camera=FNX.glm.mat4.create(),this.cameraMat=FNX.glm.mat4.create(),this.mouse=FNX.glm.vec2.create(),this.scene.engine.input.on("mousewheel",function(t){return function(e){return t.fov-=e*t.wheelSensitivity*t.scene.engine.deltaTime,FNX.glm.mat4.perspective(t.projMatrix,FNX.glm.glMatrix.toRadian(t.fov),t.ratio,t.near,t.far)}}(this)),this.scene.engine.input.on("mousemove",function(t){return function(e,r){var n,i;if(t.mouse[0]+=r[0],t.mouse[1]+=r[1],i=2*Math.PI,n=.5*Math.PI,t.rotation[1]+=FNX.glm.glMatrix.toRadian(t.mouse[0])*t.rotationSpeed,t.rotation[1]<0&&(t.rotation[1]+=i),t.rotation[1]>=i&&(t.rotation[1]-=i),t.rotation[0]+=FNX.glm.glMatrix.toRadian(t.mouse[1])*t.rotationSpeed,t.rotation[0]<-n&&(t.rotation[0]=-n),t.rotation[0]>n)return t.rotation[0]=n}}(this))}return i(e,t),e.prototype.multiplyVec3=function(t,e,r){var n,i;return r||(r=e),n=e[0],i=e[1],e=e[2],r[0]=t[0]*n+t[4]*i+t[8]*e+t[12],r[1]=t[1]*n+t[5]*i+t[9]*e+t[13],r[2]=t[2]*n+t[6]*i+t[10]*e+t[14],r},e.prototype.update=function(){var t,e;return t=FNX.glm.vec4.create(),e=this.positionSpeed*this.scene.engine.deltaTime,this.keys.up&&(t[2]+=e),this.keys.down&&(t[2]-=e),this.keys.left&&(t[0]+=e),this.keys.right&&(t[0]-=e),FNX.glm.mat4.identity(this.viewMatrix),FNX.glm.mat4.rotateX(this.viewMatrix,this.viewMatrix,this.rotation[0]),FNX.glm.mat4.rotateY(this.viewMatrix,this.viewMatrix,this.rotation[1]),FNX.glm.mat4.invert(this.viewMatrix,this.viewMatrix),this.multiplyVec3(this.viewMatrix,t),FNX.glm.vec3.add(this.position,this.position,t),FNX.glm.mat4.identity(this.viewMatrix),FNX.glm.mat4.rotateX(this.viewMatrix,this.viewMatrix,this.rotation[0]),FNX.glm.mat4.rotateY(this.viewMatrix,this.viewMatrix,this.rotation[1]),FNX.glm.mat4.translate(this.viewMatrix,this.viewMatrix,this.position)},e}(n)},function(t,e){var r;r=function(){function t(){}return t}(),t.exports=r},function(t,e,r){var n;r(11),n=function(){function t(){this.program=gl.createProgram(),0===this.program&&console.log("Shader creation failed")}return t.prototype.program=0,t.prototype.compiled=!1,t.prototype.uniforms={},t.prototype.addVertexShader=function(t){return this.addProgram(t,gl.VERTEX_SHADER)},t.prototype.addFragmentShader=function(t){return this.addProgram(t,gl.FRAGMENT_SHADER)},t.prototype.addGeometryShader=function(t){return this.addProgram(t,gl.GEOMETRY_SHADER)},t.prototype.compile=function(){return gl.linkProgram(this.program),gl.getProgramParameter(this.program,gl.LINK_STATUS)||console.log(gl.getProgramInfoLog(this.program)),gl.validateProgram(this.program),gl.getProgramParameter(this.program,gl.VALIDATE_STATUS)?this.compiled=!0:console.log(gl.getProgramInfoLog(this.program))},t.prototype.bind=function(){return gl.useProgram(this.program)},t.prototype.addUniform=function(t){var e;return e=gl.getUniformLocation(this.program,t),-1===e?console.log("Shader error: Could not find uniform "+t):this.uniforms[t]=e},t.prototype.setUniformVec3=function(t,e){return gl.uniform3fv(this.uniforms[t],e)},t.prototype.setUniformVec4=function(t,e){return gl.uniform4fv(this.uniforms[t],e)},t.prototype.setUniformMat4=function(t,e){return gl.uniformMatrix4fv(this.uniforms[t],gl.FALSE,e)},t.prototype.setUniformI=function(t,e){return gl.uniform1i(this.uniforms[t],e)},t.prototype.setUniformF=function(t,e){return gl.uniform1f(this.uniforms[t],e)},t.prototype.addProgram=function(t,e){var r;return r=gl.createShader(e),r||console.log("Shader program creation failed"),gl.shaderSource(r,t),gl.compileShader(r),gl.getShaderParameter(r,gl.COMPILE_STATUS)||console.log(gl.getShaderInfoLog(r)),gl.attachShader(this.program,r)},t}(),t.exports=n},function(t,e){var r;r=function(){function t(t,e){this.id=null,this.scene=t,this.image=e.image,this.name=e.name,this.flipY=!0,this.texture=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,this.texture),gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,this.flipY),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,e.image),this.id=this.scene.addTexture(this)}return t.prototype.MAX_SIZE=null,t}(),t.exports=r},function(t,e,r){var n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=r(14),t.exports=function(t){function e(t,r){e.__super__.constructor.call(this,t,r),this.diffuseColor=[1,1,1],this.shader.addUniform("DiffuseColor"),this.shader.addUniform("ambientLightIntensity"),this.shader.addUniform("sun.color"),this.shader.addUniform("sun.direction"),this.shader.addUniform("sun.position"),this.shader.addUniform("alpha"),this.shader.addUniform("shininess"),this.shader.addUniform("reflectivity"),this.shader.setUniformVec3("DiffuseColor",this.diffuseColor),this.shader.setUniformVec3("ambientLightIntensity",r.ambientColor),this.shader.setUniformVec3("sun.color",[1.5,1.5,1.5]),this.shader.setUniformVec3("sun.direction",[4,-1,0]),this.shader.setUniformVec3("sun.position",[2,5,4]),this.shader.setUniformF("alpha",1),this.shader.setUniformF("shininess",50),this.shader.setUniformF("reflectivity",.5)}return i(e,t),e}(n)},function(t,e,r){var n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=r(1),t.exports=function(t){function e(){}return i(e,t),e}(n)},function(t,e,r){var n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=r(1),t.exports=function(t){function e(t){e.__super__.constructor.call(this,t),this.color=FNX.glm.vec3.create(),this.position=FNX.glm.vec3.create(),this.direction=FNX.glm.vec3.create()}return i(e,t),e}(n)},function(t,e,r){"use strict";(function(t){var r,n,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,s){"object"==o(e)&&"object"==o(t)?t.exports=s():(n=[],r=s,void 0!==(i="function"==typeof r?r.apply(e,n):r)&&(t.exports=i))}(0,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=3)}([function(t,e,r){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){switch(t){case"BYTE":case"UNSIGNED_BYTE":return 1;case"SHORT":case"UNSIGNED_SHORT":return 2;case"FLOAT":return 4}}Object.defineProperty(e,"__esModule",{value:!0});var o=e.Layout=function t(){n(this,t);for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];this.attributes=r;var o=0,s=0,u=!0,h=!1,f=void 0;try{for(var l,c=r[Symbol.iterator]();!(u=(l=c.next()).done);u=!0){var p=l.value;if(this[p.key])throw new a(p);o%p.sizeOfType!=0&&(o+=p.sizeOfType-o%p.sizeOfType),this[p.key]={attribute:p,size:p.size,type:p.type,normalized:p.normalized,offset:o},o+=p.sizeInBytes,s=Math.max(s,p.sizeOfType)}}catch(t){h=!0,f=t}finally{try{!u&&c.return&&c.return()}finally{if(h)throw f}}o%s!=0&&(o+=s-o%s),this.stride=o;var d=!0,m=!1,v=void 0;try{for(var y,g=r[Symbol.iterator]();!(d=(y=g.next()).done);d=!0)this[y.value.key].stride=this.stride}catch(t){m=!0,v=t}finally{try{!d&&g.return&&g.return()}finally{if(m)throw v}}},a=function t(e){n(this,t),this.message="found duplicate attribute: "+e.key},s=function t(e,r,o){arguments.length>3&&void 0!==arguments[3]&&arguments[3],n(this,t),this.key=e,this.size=r,this.type=o,this.normalized=!1,this.sizeOfType=i(o),this.sizeInBytes=this.sizeOfType*r};o.POSITION=new s("position",3,"FLOAT"),o.NORMAL=new s("normal",3,"FLOAT"),o.TANGENT=new s("tangent",3,"FLOAT"),o.BITANGENT=new s("bitangent",3,"FLOAT"),o.UV=new s("uv",2,"FLOAT"),o.MATERIAL_INDEX=new s("materialIndex",1,"SHORT"),o.MATERIAL_ENABLED=new s("materialEnabled",1,"UNSIGNED_SHORT"),o.AMBIENT=new s("ambient",3,"FLOAT"),o.DIFFUSE=new s("diffuse",3,"FLOAT"),o.SPECULAR=new s("specular",3,"FLOAT"),o.SPECULAR_EXPONENT=new s("specularExponent",3,"FLOAT"),o.EMISSIVE=new s("emissive",3,"FLOAT"),o.TRANSMISSION_FILTER=new s("transmissionFilter",3,"FLOAT"),o.DISSOLVE=new s("dissolve",1,"FLOAT"),o.ILLUMINATION=new s("illumination",1,"UNSIGNED_SHORT"),o.REFRACTION_INDEX=new s("refractionIndex",1,"FLOAT"),o.SHARPNESS=new s("sharpness",1,"FLOAT"),o.MAP_DIFFUSE=new s("mapDiffuse",1,"SHORT"),o.MAP_AMBIENT=new s("mapAmbient",1,"SHORT"),o.MAP_SPECULAR=new s("mapSpecular",1,"SHORT"),o.MAP_SPECULAR_EXPONENT=new s("mapSpecularExponent",1,"SHORT"),o.MAP_DISSOLVE=new s("mapDissolve",1,"SHORT"),o.ANTI_ALIASING=new s("antiAliasing",1,"UNSIGNED_SHORT"),o.MAP_BUMP=new s("mapBump",1,"SHORT"),o.MAP_DISPLACEMENT=new s("mapDisplacement",1,"SHORT"),o.MAP_DECAL=new s("mapDecal",1,"SHORT"),o.MAP_EMISSIVE=new s("mapEmissive",1,"SHORT")},function(t,e,r){function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(0),s=function(){function t(e,r){i(this,t),r=r||{},r.materials=r.materials||[];var o=this;o.has_materials=!!r.materials,o.materials={},o.vertices=[],o.vertexNormals=[],o.textures=[],o.indices=[],this.name="";var a=[],s=[],u=[],h={},f=[],l={},c=-1;h.verts=[],h.norms=[],h.textures=[],h.hashindices={},h.indices=[],h.materialIndices=[],h.index=0;for(var p=/^v\s/,d=/^vn\s/,m=/^vt\s/,v=/^f\s/,y=/\s+/,g=/^usemtl/,M=e.split("\n"),b=0;b<M.length;b++){var w=M[b].trim();if(w&&!w.startsWith("#")){var E=w.split(y);if(E.shift(),p.test(w))a.push.apply(a,n(E));else if(d.test(w))s.push.apply(s,n(E));else if(m.test(w))u.push.apply(u,n(E));else if(g.test(w)){var _=E[0];_ in l||(f.push(_),l[_]=f.length-1),c=l[_]}else if(v.test(w))for(var A=!1,x=0,P=E.length;x<P;x++){3!==x||A||(x=2,A=!0);var T=E[0]+","+c,S=E[x]+","+c;if(S in h.hashindices)h.indices.push(h.hashindices[S]);else{var R=E[x].split("/"),L=R.length-1;h.verts.push(+a[3*(R[0]-1)+0]),h.verts.push(+a[3*(R[0]-1)+1]),h.verts.push(+a[3*(R[0]-1)+2]),u.length&&(h.textures.push(+u[2*(R[1]-1)+0]),h.textures.push(+u[2*(R[1]-1)+1])),h.norms.push(+s[3*(R[L]-1)+0]),h.norms.push(+s[3*(R[L]-1)+1]),h.norms.push(+s[3*(R[L]-1)+2]),h.materialIndices.push(c),h.hashindices[S]=h.index,h.indices.push(h.index),h.index+=1}3===x&&A&&h.indices.push(h.hashindices[T])}}}o.vertices=h.verts,o.vertexNormals=h.norms,o.textures=h.textures,o.vertexMaterialIndices=h.materialIndices,o.indices=h.indices,o.materialNames=f,o.materialIndices=l,o.materialsByIndex={}}return o(t,[{key:"makeBufferData",value:function(t){var e=this.vertices.length/3,r=new ArrayBuffer(t.stride*e);r.numItems=e;for(var n=new DataView(r),i=0,o=0;i<e;i++){o=i*t.stride;var s=!0,u=!1,h=void 0;try{for(var f,l=t.attributes[Symbol.iterator]();!(s=(f=l.next()).done);s=!0){var c=f.value,p=o+t[c.key].offset;switch(c.key){case a.Layout.POSITION.key:n.setFloat32(p,this.vertices[3*i],!0),n.setFloat32(p+4,this.vertices[3*i+1],!0),n.setFloat32(p+8,this.vertices[3*i+2],!0);break;case a.Layout.UV.key:n.setFloat32(p,this.textures[2*i],!0),n.setFloat32(p+4,this.vertices[2*i+1],!0);break;case a.Layout.NORMAL.key:n.setFloat32(p,this.vertexNormals[3*i],!0),n.setFloat32(p+4,this.vertexNormals[3*i+1],!0),n.setFloat32(p+8,this.vertexNormals[3*i+2],!0);break;case a.Layout.MATERIAL_INDEX.key:n.setInt16(p,this.vertexMaterialIndices[i],!0);break;case a.Layout.AMBIENT.key:var d=this.vertexMaterialIndices[i],m=this.materialsByIndex[d];if(!m)break;n.setFloat32(p,m.ambient[0],!0),n.setFloat32(p+4,m.ambient[1],!0),n.setFloat32(p+8,m.ambient[2],!0);break;case a.Layout.DIFFUSE.key:var v=this.vertexMaterialIndices[i],y=this.materialsByIndex[v];if(!y)break;n.setFloat32(p,y.diffuse[0],!0),n.setFloat32(p+4,y.diffuse[1],!0),n.setFloat32(p+8,y.diffuse[2],!0);break;case a.Layout.SPECULAR.key:var g=this.vertexMaterialIndices[i],M=this.materialsByIndex[g];if(!M)break;n.setFloat32(p,M.specular[0],!0),n.setFloat32(p+4,M.specular[1],!0),n.setFloat32(p+8,M.specular[2],!0);break;case a.Layout.SPECULAR_EXPONENT.key:var b=this.vertexMaterialIndices[i],w=this.materialsByIndex[b];if(!w)break;n.setFloat32(p,w.specularExponent,!0);break;case a.Layout.EMISSIVE.key:var E=this.vertexMaterialIndices[i],_=this.materialsByIndex[E];if(!_)break;n.setFloat32(p,_.emissive[0],!0),n.setFloat32(p+4,_.emissive[1],!0),n.setFloat32(p+8,_.emissive[2],!0);break;case a.Layout.TRANSMISSION_FILTER.key:var A=this.vertexMaterialIndices[i],x=this.materialsByIndex[A];if(!x)break;n.setFloat32(p,x.transmissionFilter[0],!0),n.setFloat32(p+4,x.transmissionFilter[1],!0),n.setFloat32(p+8,x.transmissionFilter[2],!0);break;case a.Layout.DISSOLVE.key:var P=this.vertexMaterialIndices[i],T=this.materialsByIndex[P];if(!T)break;n.setFloat32(p,T.dissolve,!0);break;case a.Layout.ILLUMINATION.key:var S=this.vertexMaterialIndices[i],R=this.materialsByIndex[S];if(!R)break;n.setInt16(p,R.illumination,!0);break;case a.Layout.REFRACTION_INDEX.key:var L=this.vertexMaterialIndices[i],I=this.materialsByIndex[L];if(!I)break;n.setFloat32(p,I.refractionIndex,!0);break;case a.Layout.SHARPNESS.key:var N=this.vertexMaterialIndices[i],O=this.materialsByIndex[N];if(!O)break;n.setFloat32(p,O.sharpness,!0);break;case a.Layout.ANTI_ALIASING.key:var C=this.vertexMaterialIndices[i],F=this.materialsByIndex[C];if(!F)break;n.setInt16(p,F.antiAliasing,!0)}}}catch(t){u=!0,h=t}finally{try{!s&&l.return&&l.return()}finally{if(u)throw h}}}return r}},{key:"makeIndexBufferData",value:function(){var t=new Uint16Array(this.indices);return t.numItems=this.indices.length,t}},{key:"addMaterialLibrary",value:function(t){for(var e in t.materials)if(e in this.materialIndices){var r=t.materials[e],n=this.materialIndices[r.name];this.materialsByIndex[n]=r}}}]),t}();e.default=s},function(t,e,r){function n(t){return Array.isArray(t)?t:Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=e.Material=function t(e){i(this,t),this.name=e,this.ambient=[0,0,0],this.diffuse=[0,0,0],this.specular=[0,0,0],this.emissive=[0,0,0],this.transmissionFilter=[0,0,0],this.dissolve=0,this.specularExponent=0,this.transparency=0,this.illumination=0,this.refractionIndex=1,this.sharpness=0,this.mapDiffuse=null,this.mapAmbient=null,this.mapSpecular=null,this.mapSpecularExponent=null,this.mapDissolve=null,this.antiAliasing=!1,this.mapBump=null,this.mapDisplacement=null,this.mapDecal=null,this.mapEmissive=null,this.mapReflections=[]};e.MaterialLibrary=function(){function t(e){i(this,t),this.data=e,this.currentMaterial=null,this.materials={},this.parse()}return o(t,[{key:"parse_newmtl",value:function(t){var e=t[0];this.currentMaterial=new a(e),this.materials[e]=this.currentMaterial}},{key:"parseColor",value:function(t){if("spectral"!=t[0]&&"xyz"!=t[0]){if(3==t.length)return t.map(parseFloat);var e=parseFloat(t[0]);return[e,e,e]}}},{key:"parse_Ka",value:function(t){this.currentMaterial.ambient=this.parseColor(t)}},{key:"parse_Kd",value:function(t){this.currentMaterial.diffuse=this.parseColor(t)}},{key:"parse_Ks",value:function(t){this.currentMaterial.specular=this.parseColor(t)}},{key:"parse_Ke",value:function(t){this.currentMaterial.emissive=this.parseColor(t)}},{key:"parse_Tf",value:function(t){this.currentMaterial.transmissionFilter=this.parseColor(t)}},{key:"parse_d",value:function(t){this.currentMaterial.dissolve=parseFloat(t.pop())}},{key:"parse_illum",value:function(t){this.currentMaterial.illumination=parseInt(t[0])}},{key:"parse_Ni",value:function(t){this.currentMaterial.refractionIndex=parseFloat(t[0])}},{key:"parse_Ns",value:function(t){this.currentMaterial.specularExponent=parseInt(t[0])}},{key:"parse_sharpness",value:function(t){this.currentMaterial.sharpness=parseInt(t[0])}},{key:"parse_cc",value:function(t,e){e.colorCorrection="on"==t[0]}},{key:"parse_blendu",value:function(t,e){e.horizontalBlending="on"==t[0]}},{key:"parse_blendv",value:function(t,e){e.verticalBlending="on"==t[0]}},{key:"parse_boost",value:function(t,e){e.boostMipMapSharpness=parseFloat(t[0])}},{key:"parse_mm",value:function(t,e){e.modifyTextureMap.brightness=parseFloat(t[0]),e.modifyTextureMap.contrast=parseFloat(t[1])}},{key:"parse_ost",value:function(t,e,r){for(;t.length<3;)t.push(r);e.u=parseFloat(t[0]),e.v=parseFloat(t[1]),e.w=parseFloat(t[2])}},{key:"parse_o",value:function(t,e){this.parse_ost(t,e.offset,0)}},{key:"parse_s",value:function(t,e){this.parse_ost(t,e.scale,1)}},{key:"parse_t",value:function(t,e){this.parse_ost(t,e.turbulence,0)}},{key:"parse_texres",value:function(t,e){e.textureResolution=parseFloat(t[0])}},{key:"parse_clamp",value:function(t,e){e.clamp="on"==t[0]}},{key:"parse_bm",value:function(t,e){e.bumpMultiplier=parseFloat(t[0])}},{key:"parse_imfchan",value:function(t,e){e.imfChan=t[0]}},{key:"parse_type",value:function(t,e){e.reflectionType=t[0]}},{key:"parseOptions",value:function(t){var e={colorCorrection:!1,horizontalBlending:!0,verticalBlending:!0,boostMipMapSharpness:0,modifyTextureMap:{brightness:0,contrast:1},offset:{u:0,v:0,w:0},scale:{u:1,v:1,w:1},turbulence:{u:0,v:0,w:0},clamp:!1,textureResolution:null,bumpMultiplier:1,imfChan:null},r=void 0,n=void 0,i={};for(t.reverse();t.length;){var o=t.pop();o.startsWith("-")?(r=o.substr(1),i[r]=[]):i[r].push(o)}for(r in i)if(i.hasOwnProperty(r)){n=i[r];var a=this["parse_"+r];a&&a.bind(this)(n,e)}return e}},{key:"parseMap",value:function(t){var e=void 0,r=void 0;if(t[0].startsWith("-"))e=t.pop(),r=t;else{var i=n(t);e=i[0],r=i.slice(1)}return r=this.parseOptions(r),r.filename=e,r}},{key:"parse_map_Ka",value:function(t){this.currentMaterial.mapAmbient=this.parseMap(t)}},{key:"parse_map_Kd",value:function(t){this.currentMaterial.mapDiffuse=this.parseMap(t)}},{key:"parse_map_Ks",value:function(t){this.currentMaterial.mapSpecular=this.parseMap(t)}},{key:"parse_map_Ke",value:function(t){this.currentMaterial.mapEmissive=this.parseMap(t)}},{key:"parse_map_Ns",value:function(t){this.currentMaterial.mapSpecularExponent=this.parseMap(t)}},{key:"parse_map_d",value:function(t){this.currentMaterial.mapDissolve=this.parseMap(t)}},{key:"parse_map_aat",value:function(t){this.currentMaterial.antiAliasing="on"==t[0]}},{key:"parse_map_bump",value:function(t){this.currentMaterial.mapBump=this.parseMap(t)}},{key:"parse_bump",value:function(t){this.parse_map_bump(t)}},{key:"parse_disp",value:function(t){this.currentMaterial.mapDisplacement=this.parseMap(t)}},{key:"parse_decal",value:function(t){this.currentMaterial.mapDecal=this.parseMap(t)}},{key:"parse_refl",value:function(t){this.currentMaterial.mapReflections.push(this.parseMap(t))}},{key:"parse",value:function(){var t=this.data.split(/\r?\n/),e=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=o.value;if((s=s.trim())&&!s.startsWith("#")){var u=s.split(/\s/),h=void 0,f=u,l=n(f);h=l[0],u=l.slice(1);var c=this["parse_"+h];c&&c.bind(this)(u)}}}catch(t){r=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw i}}delete this.data,this.currentMaterial=null}}]),t}()},function(t,e,r){t.exports=r(4)},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.deleteMeshBuffers=e.initMeshBuffers=e.downloadMeshes=e.downloadModels=e.Layout=e.MaterialLibrary=e.Material=e.Mesh=void 0;var n=r(1),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=r(2),a=r(0),s=r(5);e.Mesh=i.default,e.Material=o.Material,e.MaterialLibrary=o.MaterialLibrary,e.Layout=a.Layout,e.downloadModels=s.downloadModels,e.downloadMeshes=s.downloadMeshes,e.initMeshBuffers=s.initMeshBuffers,e.deleteMeshBuffers=s.deleteMeshBuffers},function(t,e,r){function n(t,e){var r=["mapDiffuse","mapAmbient","mapSpecular","mapDissolve","mapBump","mapDisplacement","mapDecal","mapEmissive"];e.endsWith("/")||(e+="/");var n=[];for(var i in t.materials)if(t.materials.hasOwnProperty(i)){i=t.materials[i];var o=!0,a=!1,s=void 0;try{for(var u,h=r[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var f=u.value;!function(t){var r=i[t];if(!r)return"continue";var o=e+r.filename;n.push(fetch(o).then(function(t){if(!t.ok)throw new Error;return t.blob()}).then(function(t){var e=new Image;e.src=URL.createObjectURL(t),r.texture=e}).catch(function(){}))}(f)}}catch(t){a=!0,s=t}finally{try{!o&&h.return&&h.return()}finally{if(a)throw s}}}return Promise.all(n)}function i(t){var e=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var h=a.value;!function(t){var r=[];if(!t.obj)throw new Error('"obj" attribute of model object not set. The .obj file is required to be set in order to use downloadModels()');var i=t.name;if(!i){var o=t.obj.split("/");i=o[o.length-1].replace(".obj","")}if(r.push(Promise.resolve(i)),r.push(fetch(t.obj).then(function(t){return t.text()}).then(function(t){return new f.default(t)})),t.mtl){var a=t.mtl;"boolean"==typeof a&&(a=t.obj.replace(/\.obj$/,".mtl")),r.push(fetch(a).then(function(t){return t.text()}).then(function(e){var r=new l.MaterialLibrary(e);if(!1!==t.downloadMtlTextures){var i=t.mtlTextureRoot;return i||(i=a.substr(0,a.lastIndexOf("/"))),Promise.all([Promise.resolve(r),n(r,i)])}return Promise.all(Promise.resolve(r))}).then(function(t){return t[0]}))}e.push(Promise.all(r))}(h)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return Promise.all(e).then(function(t){var e={},r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value,h=u(s,3),f=h[0],l=h[1],c=h[2];l.name=f,c&&l.addMaterialLibrary(c),e[f]=l}}catch(t){n=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return e})}function o(t,e,r){void 0===r&&(r={});var n=[];for(var i in t)!function(e){if(!t.hasOwnProperty(e))return"continue";var r=t[e];n.push(fetch(r).then(function(t){return t.text()}).then(function(t){return[e,new f.default(t)]}))}(i);Promise.all(n).then(function(t){var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var h=a.value,f=u(h,2),l=f[0],c=f[1];r[l]=c}}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return e(r)})}function a(t,e){e.normalBuffer=c(t,t.ARRAY_BUFFER,e.vertexNormals,3),e.textureBuffer=c(t,t.ARRAY_BUFFER,e.textures,2),e.vertexBuffer=c(t,t.ARRAY_BUFFER,e.vertices,3),e.indexBuffer=c(t,t.ELEMENT_ARRAY_BUFFER,e.indices,1)}function s(t,e){t.deleteBuffer(e.normalBuffer),t.deleteBuffer(e.textureBuffer),t.deleteBuffer(e.vertexBuffer),t.deleteBuffer(e.indexBuffer)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.downloadModels=i,e.downloadMeshes=o,e.initMeshBuffers=a,e.deleteMeshBuffers=s;var h=r(1),f=function(t){return t&&t.__esModule?t:{default:t}}(h),l=r(2),c=(r(0),function(t,e,r,n){var i=t.createBuffer(),o=e===t.ARRAY_BUFFER?Float32Array:Uint16Array;return t.bindBuffer(e,i),t.bufferData(e,new o(r),t.STATIC_DRAW),i.itemSize=n,i.numItems=r.length/n,i})}])})}).call(e,r(42)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}]);